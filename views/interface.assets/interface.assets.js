init.interface.assets=function(args){topmenuset("assets");clearInterval(intervals);clipb_success=function(){console.log("Data copied to clipboard.");$("#action-receive .modal-receive-addressfrom").pulse({times:5,duration:250})};clipb_fail=function(err){alert("This browser cannot automatically copy to the clipboard! \n\nPlease select the text manually, and press CTRL+C to \ncopy it to your clipboard.\n")};fill_send=function(asset,balance){if(balance&&balance!=="?"){if(!isToken(asset)){var spendable=toInt(balance).minus(toInt(assets.fees[asset]))}else{var spendable=toInt(balance)}if(spendable<0){spendable=0}$("#action-send .modal-send-currency").html(asset.toUpperCase());$("#action-send .modal-send-currency").attr("asset",asset);$("#action-send .modal-send-balance").html(formatFloat(spendable));$("#modal-send-target").val("");$("#modal-send-amount").val("");$("#action-send .modal-send-addressfrom").html(assets.addr[asset]);$("#action-send .modal-send-networkfee").html(String(assets.fees[asset]).replace(/0+$/,"")+" "+asset.split(".")[0].toUpperCase());check_tx()}};fill_recv=function(asset,balance){$("#action-receive .modal-receive-currency").html(asset.toUpperCase());$("#action-receive .modal-receive-addressfrom").html(assets.addr[asset]);$("#modal-receive-button").attr("data-clipboard-text",$("#action-receive .modal-receive-addressfrom").html());clipboardButton("#modal-receive-button",clipb_success,clipb_fail);$("#action-receive .modal-receive-status").attr("id","receivestatus-"+asset);$("#qrcode").html("").append(function(){new QRCode(document.getElementById("qrcode"),{text:assets.addr[asset],width:160,height:160,colorDark:"#000000",colorLight:"#ffffff",correctLevel:QRCode.CorrectLevel.H})})};stop_recv=function(){$("#action-receive .modal-receive-status").attr("id","receivestatus")};check_tx=function(){var p={};p.asset=$("#action-send .modal-send-currency").attr("asset");p.target_address=String($("#modal-send-target").val());p.amount=Number($("#modal-send-amount").val());p.available=Number($("#action-send .modal-send-balance").html());if(!isNaN(p.amount)&&p.amount>0&&p.amount<=p.available&&p.target_address){$("#action-send .pure-button-send").removeClass("disabled")}else{$("#action-send .pure-button-send").addClass("disabled")}};ui_assets=function(properties){var i=properties.i;var balance=properties.balance;for(j=0;j<i;j++){setTimeout(function(j){if(typeof balance.asset[j]!=="undefined"){var element=".assets-main > .data .balance-"+balance.asset[j].replace(/\./g,"-");if(balance.lasttx[j]+12e4<(new Date).getTime()){hybriddcall({r:"a/"+balance.asset[j]+"/balance/"+assets.addr[balance.asset[j]],z:0},element,function(object){if(typeof object.data=="string"){object.data=formatFloat(object.data)}var assetbuttons=".assets-main > .data .assetbuttons-"+balance.asset[j].replace(/\./g,"-");if(object.data!=null&&!isNaN(object.data)){$(assetbuttons).delay(1e3).removeClass("disabled");$(assetbuttons+" a").attr("data-toggle","modal")}else{$(assetbuttons).addClass("disabled");$(assetbuttons+" a").removeAttr("data-toggle")}return object})}}},j*500,j)}}};
