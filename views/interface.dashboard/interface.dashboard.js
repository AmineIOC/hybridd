init.interface.dashboard=function(args){GL={usercrypto:{user_keys:args.user_keys,nonce:args.nonce}};$("#userID").html(args.userid);topmenuset("dashboard");clearInterval(intervals);$(document).ready(function(){$(".dashboard-balances .spinner-loader").fadeOut("slow",function(){balance={};balance.asset=[];balance.amount=[];GL.cur_step=next_step();$.ajax({url:path+zchan(GL.usercrypto,GL.cur_step,"a"),success:function(object){object=zchan_obj(GL.usercrypto,GL.cur_step,object);if(assets.count==0){for(var entry in object.data){assets.count++}}var pass=object.data;hybriddcall({r:"/s/deterministic/hashes",z:1,pass:pass},null,function(object,passdata){assets.modehashes=object.data;var output="";var i=0;for(var entry in passdata){balance.asset[i]=entry;balance.amount[i]=0;i++;var defer=assets.init.indexOf(passdata[entry].split(".")[0])==-1?0:3e3;assets.init.push(passdata[entry].split(".")[0]);setTimeout(function(entry,passdata){init_asset(entry,passdata[entry])},100*i+defer,entry,passdata);if(i==assets.count){for(i=0;i<5;i++){if(typeof balance.asset[i]!=="undefined"){output+="<div onclick=\"fetchview('interface.assets',{user_keys: pass_args.user_keys, nonce: pass_args.nonce, asset:'"+balance.asset[i]+'\'});" class="balance"><h5>'+balance.asset[i]+'</h5><div class="divider"></div><h3 class="balance-'+balance.asset[i].replace(/\./g,"-")+'">'+progressbar()+"</h3></div>"}}$(".dashboard-balances > .data").html(output)}}var getBalances=function(balance,assets){for(i=0;i<5;i++){setTimeout(function(i){if(typeof balance.asset[i]!="undefined"){if(typeof assets.addr[balance.asset[i]]!="undefined"){var element=".dashboard-balances > .data > .balance > .balance-"+balance.asset[i].replace(/\./g,"-");hybriddcall({r:"a/"+balance.asset[i]+"/balance/"+assets.addr[balance.asset[i]],z:0},element,function(object){if(typeof object.data=="string"){object.data=UItransform.formatFloat(object.data)}return object})}}},i*500,i)}};intervals=setInterval(function(){getBalances(balance,assets)},6e4);loadinterval=setInterval(function(){var assetsloaded=true;for(i=0;i<5;i++){if(typeof balance.asset[i]!="undefined"&&typeof assets.addr[balance.asset[i]]=="undefined"){assetsloaded=false}}if(assetsloaded){getBalances(balance,assets);clearInterval(loadinterval)}},500)})}})})})};
