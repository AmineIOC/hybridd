init.interface.dashboard=function(args){$("#userID").html(args.userid);topmenuset("dashboard");clearInterval(intervals);$(document).ready(function(){var usercrypto={user_keys:args.user_keys,nonce:args.nonce};$(".dashboard-balances .spinner-loader").fadeOut("slow",function(){balance={};balance.asset=[];balance.amount=[];var cur_step=next_step();$.ajax({url:path+zchan(usercrypto,cur_step,"a"),success:function(object){object=zchan_obj(usercrypto,cur_step,object);var callstates=[];var output="";if(assets.count==0){for(var entry in object.data){assets.count++}}var i=0;for(var entry in object.data){balance.asset[i]=entry;balance.amount[i]=0;i++;init_asset(usercrypto,entry,object.data[entry]);if(i==assets.count){for(i=0;i<5;i++){if(typeof balance.asset[i]!=="undefined"){output+="<div onclick=\"fetchview('interface.assets',{user_keys: pass_args.user_keys, nonce: pass_args.nonce, asset:'"+balance.asset[i]+'\'});" class="balance"><h5>'+balance.asset[i]+'</h5><div class="divider"></div><h3 class="balance-'+balance.asset[i]+'">'+progressbar()+"</h3></div>"}}$(".dashboard-balances > .data").html(output)}}var getBalances=function(usercrypto,balance,assets){for(i=0;i<5;i++){setTimeout(function(i){if(typeof balance.asset[i]!="undefined"){if(typeof assets.addr[balance.asset[i]]!="undefined"){var element=".dashboard-balances > .data > .balance > .balance-"+balance.asset[i];var cur_step=next_step();hybriddcall({r:"a/"+balance.asset[i]+"/balance/"+assets.addr[balance.asset[i]],c:usercrypto,s:cur_step,z:0},element,function(object){if(typeof object.data=="string"){object.data=formatFloat(object.data)}return object})}}},i*500,i)}};intervals=setInterval(function(){getBalances(usercrypto,balance,assets)},6e4);loadinterval=setInterval(function(){var assetsloaded=true;for(i=0;i<5;i++){if(typeof balance.asset[i]!="undefined"&&typeof assets.addr[balance.asset[i]]=="undefined"){assetsloaded=false}}if(assetsloaded){getBalances(usercrypto,balance,assets);clearInterval(loadinterval)}},500)}})});var element={};element.transactions=".dashboard-transactions";$(element.transactions+" .spinner-loader").fadeOut("slow",function(){var output='<div style="text-align: center; margin-left: auto; margin-right: auto; width: 30%; color: #CCC;">'+svg["cogs"]+"<br><br>WORK IN PROGRESS</div>";$(element.transactions+" > .data").html(output);$(element.transactions+" > .data #path4155").attr("style","fill: #CCC")});element.trade=".dashboard-trade";$(element.trade+" .spinner-loader").fadeOut("slow",function(){var output='<div style="text-align: center; margin-left: auto; margin-right: auto; width: 30%; color: #CCC;">'+svg["cogs"]+"<br><br>WORK IN PROGRESS</div>";$(element.trade+" > .data").html(output);$(element.trade+" > .data #path4155").attr("style","fill: #CCC")});element.chat=".dashboard-chat";$(element.chat+" .spinner-loader").fadeOut("slow",function(){var output='<div style="text-align: center; margin-left: auto; margin-right: auto; width: 30%; color: #CCC;">'+svg["cogs"]+"<br><br>WORK IN PROGRESS</div>";$(element.chat+" > .data").html(output);$(element.chat+" > .data #path4155").attr("style","fill: #CCC")});element.apps=".dashboard-apps";$(element.apps+" .spinner-loader").fadeOut("slow",function(){var output='<div style="text-align: center; margin-left: auto; margin-right: auto; width: 30%; color: #CCC;">'+svg["cogs"]+"<br><br>WORK IN PROGRESS</div>";$(element.apps+" > .data").html(output);$(element.apps+" > .data #path4155").attr("style","fill: #CCC")})})};
