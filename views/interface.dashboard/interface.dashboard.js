init.interface.dashboard=function(args){$("#userID").html(args.userid);topmenuset("dashboard");clearInterval(intervals);manage_favourites=function(){var output="";output+='<table class="pure-table pure-table-striped"><tbody>';output+='<tr><td class="icon">'+svg["circle"]+'</td><td class="asset asset-btc">BTC</td><td class="full-name">Bitcoin</td>';output+='<td class="actions"><div class="assetbuttons assetbuttons-btc"><a onclick="" class="pure-button pure-button-grey button-unfavourite" role="button"><div class="actions-icon">'+svg["star-o"]+"</div>Remove star</a></div></td></tr>";output+='<tr><td class="icon">'+svg["circle"]+'</td><td class="asset asset-eth">ETH</td><td class="full-name">Ethereum</td>';output+='<td class="actions"><div class="assetbuttons assetbuttons-eth"><a onclick="" class="pure-button pure-button-warning button-favourite" role="button"><div class="actions-icon">'+svg["star"]+"</div>Add star</a></div></td></tr>";output+='<tr><td class="icon">'+svg["circle"]+'</td><td class="asset asset-lsk">LSK</td><td class="full-name">Lisk</td>';output+='<td class="actions"><div class="assetbuttons assetbuttons-lsk"><a onclick="" class="pure-button pure-button-warning button-favourite" role="button"><div class="actions-icon">'+svg["star"]+"</div>Add star</a></div></td></tr>";output+="</tbody></table>";$("#manage-favourites .data").html(output)};$(document).ready(function(){$(".dashboard-balances .spinner-loader").fadeOut("slow",function(){balance={};balance.asset=[];balance.amount=[];balance.lasttx=[];if(typeof GL.assetsActive==="undefined"){storage.Get(userStorageKey("ff00-0033"),function(crypted){GL.assetsActive=userDecode(crypted);if(typeof GL.assetsDash==="undefined"){storage.Get(userStorageKey("ff00-0034"),function(crypted){GL.assetsDash=userDecode(crypted);displayAssets()})}})}else{displayAssets()}})})};function displayAssets(){if(GL.assetsActive==null||typeof GL.assetsActive!=="object"){GL.assetsActive=["btc","eth"]}if(GL.assetsDash==null||typeof GL.assetsDash!=="object"){GL.assetsDash=GL.assetsActive}hybriddcall({r:"/s/deterministic/hashes",z:1},null,function(object,passdata){assets.modehashes=object.data;var activeAssetsObj={};var i=0;for(i=0;i<GL.assetsActive.length;++i){if(typeof GL.assetmodes[GL.assetsActive[i]]!=="undefined"){activeAssetsObj[GL.assetsActive[i]]=GL.assetmodes[GL.assetsActive[i]]}}var output="";var i=0;for(var entry in activeAssetsObj){balance.asset[i]=entry;balance.amount[i]=0;i++;var defer=assets.init.indexOf(GL.assetmodes[entry].split(".")[0])==-1?0:3e3;assets.init.push(GL.assetmodes[entry].split(".")[0]);setTimeout(function(entry,passdata){initAsset(entry,GL.assetmodes[entry])},100*i+defer,entry);if(i===GL.assetsActive.length){var j;for(j=0;j<GL.assetsActive.length;j++){if(GL.assetsDash.indexOf(GL.assetsActive[j])!==-1&&typeof balance.asset[j]!=="undefined"){output+="<div onclick=\"fetchview('interface.assets',{user_keys: pass_args.user_keys, nonce: pass_args.nonce, asset:'"+balance.asset[j]+'\'});" class="balance"><h5>'+balance.asset[j]+'</h5><div class="divider"></div><h3 class="balance-'+balance.asset[j].replace(/\./g,"-")+'">'+progressbar()+"</h3></div>"}}$(".dashboard-balances > .data").html(output)}}var getBalances=function(balance,assets){for(i=0;i<GL.assetsActive.length;i++){if(GL.assetsDash.indexOf(GL.assetsActive[i])!==-1&&typeof balance.asset[i]!=="undefined"){setTimeout(function(i){if(typeof assets.addr[balance.asset[i]]!="undefined"){var element=".dashboard-balances > .data > .balance > .balance-"+balance.asset[i].replace(/\./g,"-");hybriddcall({r:"a/"+balance.asset[i]+"/balance/"+assets.addr[balance.asset[i]],z:0},element,function(object){if(typeof object.data=="string"){object.data=UItransform.formatFloat(object.data)}return object})}},i*500,i)}}};intervals=setInterval(function(){getBalances(balance,assets)},6e4);loadinterval=setInterval(function(){var assetsloaded=true;for(i=0;i<5;i++){if(typeof balance.asset[i]!="undefined"&&typeof assets.addr[balance.asset[i]]=="undefined"){assetsloaded=false}}if(assetsloaded){getBalances(balance,assets);clearInterval(loadinterval)}},500)})}
